(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{136:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"rightToc",(function(){return i})),n.d(t,"default",(function(){return p}));var r=n(1),c=n(9),a=(n(0),n(233)),l={},o={id:"1062/Week-08",title:"Week-08",description:"###### tags: `1062` `LSA` `ncnu`",source:"@site/docs/1062/Week-08.md",permalink:"/docs/1062/Week-08",editUrl:"https://github.com/NCNU-OpenSource/NCNU-OpenSource.github.io/edit/src/docs/1062/Week-08.md",sidebar:"someSidebar",previous:{title:"Week-07",permalink:"/docs/1062/Week-07"},next:{title:"Week-09",permalink:"/docs/1062/Week-09"}},i=[{value:"Public Cloud",id:"public-cloud",children:[]},{value:"Private Cloud",id:"private-cloud",children:[]},{value:"Build a simple application running on docker compose",id:"build-a-simple-application-running-on-docker-compose",children:[]},{value:"GUI \u754c\u9762 cluster management tool - UCP",id:"gui-\u754c\u9762-cluster-management-tool---ucp",children:[]},{value:"IDS",id:"ids",children:[]},{value:"Tripwire",id:"tripwire",children:[]},{value:"honeypot",id:"honeypot",children:[]},{value:"Snort",id:"snort",children:[]},{value:"BlueT \u8b1b\u89e3\ud83d\udc35\ud83d\ude48\ud83d\udc35\ud83d\ude48",id:"bluet-\u8b1b\u89e3",children:[]}],b={rightToc:i};function p(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(a.b)("wrapper",Object(r.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h6",{id:"tags-1062-lsa-ncnu"},"tags: ",Object(a.b)("inlineCode",{parentName:"h6"},"1062")," ",Object(a.b)("inlineCode",{parentName:"h6"},"LSA")," ",Object(a.b)("inlineCode",{parentName:"h6"},"ncnu")),Object(a.b)("h1",{id:"public-cloud-vs-private-cloud"},"Public Cloud V.S. Private Cloud"),Object(a.b)("h2",{id:"public-cloud"},"Public Cloud"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u901a\u5e38\u6709\u514d\u8cbb\u984d\u5ea6"),Object(a.b)("li",{parentName:"ul"},"\u9700\u8981\u591a\u9805\u529f\u80fd\u6642\u6210\u672c\u8f03\u4f4e")),Object(a.b)("h2",{id:"private-cloud"},"Private Cloud"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u96b1\u79c1"),Object(a.b)("li",{parentName:"ul"},"\u8a2d\u5b9a\u81ea\u7531\u5ea6\u8f03\u9ad8")),Object(a.b)("h1",{id:"docker-compose"},"Docker Compose"),Object(a.b)("h2",{id:"build-a-simple-application-running-on-docker-compose"},"Build a simple application running on docker compose"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"mkdir dockercomposetest"),"\n1. create ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.docker.com/compose/gettingstarted/#step-1-setup"}),"app.py"),"\n2. create requirements.txt\n3. create ",Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://docs.docker.com/compose/gettingstarted/#step-2-create-a-dockerfile"}),"Dockerfile"),"\n4. ",Object(a.b)("inlineCode",{parentName:"p"},"docker-compose up"),"\n(error: cannot connect docker daemon, that's because you not a group user in docker)\n",Object(a.b)("inlineCode",{parentName:"p"},"sudo groupadd docker"),"\n",Object(a.b)("inlineCode",{parentName:"p"},"sudo gpasswd -a [USERNAME] docker"),"\n",Object(a.b)("inlineCode",{parentName:"p"},"sudo service docker restart"),"\n5. enter ",Object(a.b)("inlineCode",{parentName:"p"},"http://0.0.0.0:5000/")," in a browser"),Object(a.b)("h1",{id:"docker-swarm"},"Docker Swarm"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"docker swarm init")),Object(a.b)("h2",{id:"gui-\u754c\u9762-cluster-management-tool---ucp"},"GUI \u754c\u9762 cluster management tool - ",Object(a.b)("a",Object(r.a)({parentName:"h2"},{href:"https://docs.docker.com/ee/ucp/"}),"UCP")),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u9700\u8981\u6709 docker ee\uff0c\u4e0d\u4fbf\u5b9c\u5537")),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"curl ")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"docker image pull docker/ucp:3.0.0")),Object(a.b)("li",{parentName:"ol"},Object(a.b)("inlineCode",{parentName:"li"},"docker container run --rm -it --name ucp -v /var/run/docker/...?:"))),Object(a.b)("h1",{id:"ids-vs-ips----slide\u9023\u7d50"},"IDS v.s. IPS -- ",Object(a.b)("a",Object(r.a)({parentName:"h1"},{href:"https://drive.google.com/open?id=1eionfoMT20ay9-7A3sL38AP1MchthGq-fu7IliQ5nsk"}),"slide\u9023\u7d50")),Object(a.b)("h2",{id:"ids"},"IDS"),Object(a.b)("ol",null,Object(a.b)("li",{parentName:"ol"},"NIDS \u7db2\u8def\u578b"),Object(a.b)("li",{parentName:"ol"},"HIDS \u4e3b\u6a5f\u578b(\u91dd\u5c0d\u500b\u5225\u4e3b\u6a5f\uff09"),Object(a.b)("li",{parentName:"ol"},"DIDS \u5206\u6563\u5f0f")),Object(a.b)("h2",{id:"tripwire"},"Tripwire"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u53ef\u4ee5\u900f\u904e MD5/SHA \u7b49\u96dc\u6e4a\u65b9\u5f0f\u53bb\u78ba\u8a8d\u6a94\u6848\u662f\u5426\u6709\u88ab\u4fee\u6539")),Object(a.b)("h2",{id:"honeypot"},"honeypot"),Object(a.b)("p",null,"\u5728\u7cfb\u7d71\u4e2d\u5f04\u51fa\u6709\u6f0f\u6d1e\u7684\u74b0\u5883\u4ee5\u8a98\u6355\u653b\u64ca\u884c\u7232"),Object(a.b)("h2",{id:"snort"},"Snort"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u5075\u6e2c\u6a21\u5f0f(Sniffer Mode)",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u622a\u53d6\u7db2\u57df\u5167\u5c01\u5305\u986f\u793a\u5728\u87a2\u5e55\u4e0a"))),Object(a.b)("li",{parentName:"ul"},"\u5c01\u5305\u8a18\u9304\u6a21\u5f0f(packet logger mode)",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u5c07\u622a\u53d6\u7684\u5c01\u5305\u5132\u5b58\u4e0b\u4f86\uff0c\u4ee5\u4fbf\u65e5\u5f8c\u5206\u6790"))),Object(a.b)("li",{parentName:"ul"},"\u4e0a\u7dda\u6a21\u5f0f(inline mode)")),Object(a.b)("p",null,"\u5f85\u67e5\uff1a\u5075\u6e2c\u6a21\u5f0f\u8ddf\u5c01\u5305\u8a18\u9304\u6a21\u5f0f\u5dee\u5728\u54ea\uff1f\n\u5075\u6e2c\u6a21\u5f0f\u5c31\u771f\u7684\u53ea\u662f\u6253\u5370\u51fa\u5c01\u5305\uff0c\u53ef\u4ee5\u9078\u64c7\u5370 TCP header \u6216\u662f IP \u8207 TCP header \u6216\u662f\u5305\u542b data"),Object(a.b)("p",null,Object(a.b)("inlineCode",{parentName:"p"},"$sudo snort -dev")),Object(a.b)("h2",{id:"bluet-\u8b1b\u89e3"},"BlueT \u8b1b\u89e3\ud83d\udc35\ud83d\ude48\ud83d\udc35\ud83d\ude48"),Object(a.b)("p",null,"\u670d\u52d9\u5206\u4e09\u5c64"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"load balancer",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u80fd\u77e5\u9053 app \u64f4\u5c55"))),Object(a.b)("li",{parentName:"ul"},"App",Object(a.b)("ul",{parentName:"li"},Object(a.b)("li",{parentName:"ul"},"\u6a6b\u5411\u64f4\u5c55"))),Object(a.b)("li",{parentName:"ul"},"DB")),Object(a.b)("p",null,"Nginx \u8655\u7406\u5fc5\u9808 reload config file"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"\u591a\u5c11\u6703\u5f71\u97ff\u5230 Performance"),Object(a.b)("li",{parentName:"ul"},"\u6703\u4e0d\u6703\u4e00 reload \u5c31\u8d77\u4e0d\u4f86")),Object(a.b)("p",null,"nginx.conf:"),Object(a.b)("pre",null,Object(a.b)("code",Object(r.a)({parentName:"pre"},{}),"server {\nlisten 80 default_server;\nclient_max_body_size 100M;\nresolver 127.0.0.11 valid=5s; #dns alive time\nset $upstream_endpoint http://app:8000;\nlocation / {\n  proxy_pass $upstream_endpoint;\n  }\n}\n")),Object(a.b)("p",null,"docker \u7528 -v \u53bb\u639b\u8f09 IO \u901f\u5ea6\u50c5 20 MBps\n\u7528\u865b\u64ec volume \u5feb\u591a\u4e86"),Object(a.b)("p",null,"container \u9810\u8a2d\u540d\u7a31:\ndocker_influx_1,2,3..."),Object(a.b)("p",null,"influx:\n\u7528\u4f86\u6307\u5b9a container \u7684\u540d\u7a31"),Object(a.b)("p",null,"healthcheck \u53ef\u4ee5\u653e\u6e2c\u8a66\u6307\u4ee4"),Object(a.b)("p",null,"\u5c0f\u6280\u5de7\uff1a\n\u5c07 config file \u639b\u8f09\u9032 docker \u4e14\u8a2d\u5b9a\u552f\u8b80\uff0c\u9019\u6a23\u5c31\u53ef\u4ee5\u5728 docker \u74b0\u5883\u5916\u76f4\u63a5\u6539 config \u8b93 service \u53bb\u8b80"),Object(a.b)("p",null,"Ctrl+C \u53bb\u95dc\u6389 docker-compose \u5f88\u66b4\u529b\uff0c\u8acb\u4f7f\u7528 docker-compose down"),Object(a.b)("p",null,"\u53ef\u4ee5\u7528\u9019\u65b9\u5f0f\u53bb\u6307\u5b9a\u6578\u91cf\uff0c\u4e0d\u5fc5\u53bb\u6539 yaml \u6a94\u6848\n",Object(a.b)("inlineCode",{parentName:"p"},"docker-compose up --scale app=7 -d")),Object(a.b)("p",null,Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://github.com/BlueT/obj-filter"}),"https://github.com/BlueT/obj-filter")),Object(a.b)("p",null,"SonarQube Scanner "),Object(a.b)("p",null,Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://travis-ci.org/"}),"Travis")," \u7528\u4f86\u6aa2\u6e2c\u9019\u6b21 commit \u6709\u6c92\u6709\u5c07\u4f60\u7684\u7a0b\u5f0f\u78bc\u641e\u58de\n\u901a\u5e38\u662f\u5148\u5beb\u6e2c\u8a66\u78bc\u518d\u5beb\u7a0b\u5f0f\u78bc"),Object(a.b)("p",null,Object(a.b)("a",Object(r.a)({parentName:"p"},{href:"https://about.sonarcloud.io/"}),"SonarCloud")))}p.isMDXComponent=!0},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(0),c=n.n(r);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var b=c.a.createContext({}),p=function(e){var t=c.a.useContext(b),n=t;return e&&(n="function"==typeof e?e(t):o({},t,{},e)),n},u=function(e){var t=p(e.components);return c.a.createElement(b.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return c.a.createElement(c.a.Fragment,{},t)}},m=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,b=i(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,s=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?c.a.createElement(s,o({ref:t},b,{components:n})):c.a.createElement(s,o({ref:t},b))}));function s(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=m;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var b=2;b<a;b++)l[b]=n[b];return c.a.createElement.apply(null,l)}return c.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);