(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{134:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return p})),t.d(n,"metadata",(function(){return b})),t.d(n,"rightToc",(function(){return i})),t.d(n,"default",(function(){return o}));var r=t(1),a=t(9),c=(t(0),t(233)),p={},b={id:"1071/Week7",title:"Week7",description:"# Week7, 11/1 LSA",source:"@site/docs/1071/Week7.md",permalink:"/docs/1071/Week7",editUrl:"https://github.com/NCNU-OpenSource/NCNU-OpenSource.github.io/edit/src/docs/1071/Week7.md",sidebar:"someSidebar",previous:{title:"Week6",permalink:"/docs/1071/Week6"},next:{title:"Week8",permalink:"/docs/1071/Week8"}},i=[{value:"nginx php \u8a2d\u5b9a",id:"nginx-php-\u8a2d\u5b9a",children:[]},{value:"nginx access control",id:"nginx-access-control",children:[]},{value:"sftp",id:"sftp",children:[]},{value:"ftp",id:"ftp",children:[]},{value:"rsync",id:"rsync",children:[]},{value:"crontab",id:"crontab",children:[]},{value:"major webserver",id:"major-webserver",children:[]}],l={rightToc:i};function o(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},l,t,{components:n,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"week7-111-lsa"},"Week7, 11/1 LSA"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"^")," \u958b\u982d\n",Object(c.b)("inlineCode",{parentName:"p"},"$")," \u7d50\u5c3e\n",Object(c.b)("inlineCode",{parentName:"p"},"*")," \u4efb\u610f\u5b57\u5143"),Object(c.b)("h3",{id:"nginx-php-\u8a2d\u5b9a"},"nginx php \u8a2d\u5b9a"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{}),"# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n\nlocation ~ \\.php$ {\n    include snippets/fastcgi-php.conf;\n    \n    # With php7.0-cgi alone:\n    fastcgi_pass 127.0.0.1:9000;\n    # With php7.0-fpm:                                                                         \n    fastcgi_pass unix:/run/php/php7.0-fpm.sock;\n}`\n")),Object(c.b)("h3",{id:"nginx-access-control"},"nginx access control"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{}),"# deny access to .htaccess files, if Apache's document root\n# concurs with nginx's one\n     location ~ /\\.ht {\n     deny all;\n }\n")),Object(c.b)("h3",{id:"sftp"},"sftp"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"sftp -v destination "),"  -v \u53ef\u4ee5\u770b\u9023\u7dab\u7684\u904e\u7a0b\uff0c\u8b93\u81ea\u5df1\u77e5\u9053\u6709\u6c92\u6709\u5728\u8dd1"),Object(c.b)("li",{parentName:"ul"},Object(c.b)("inlineCode",{parentName:"li"},"put <\u5bb6\u76ee\u9304> <\u9060\u7aef\u76ee\u9304>")," \u4e0a\u50b3"),Object(c.b)("li",{parentName:"ul"},"\u6709 ",Object(c.b)("inlineCode",{parentName:"li"},"l")," \u7684\u6307\u4ee4\u662f\u7d66local \u7684\u6307\u4ee4 \uff0c \u6c92\u6709\u5728\u6307\u4ee4\u524d\u9762\u52a0\u4e0a",Object(c.b)("inlineCode",{parentName:"li"},"l"),"\u662f\u7d66\u9060\u7aef\u76ee\u9304\u7684\u3002")),Object(c.b)("h3",{id:"ftp"},"ftp"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"port 21")," \u56fa\u5b9a\u50b3\u6307\u4ee4\n",Object(c.b)("inlineCode",{parentName:"p"},"port 20")," \u50b3\u6307\u4ee4"),Object(c.b)("h4",{id:"\u6307\u4ee4"},"\u6307\u4ee4"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sftp -v localhost"),"sftp\u9023\u7dda\u672c\u6a5f\n",Object(c.b)("inlineCode",{parentName:"p"},"ps aux")," \u770b\u96fb\u8166\u7a0b\u5e8f\n",Object(c.b)("inlineCode",{parentName:"p"},"ps aux | less ")," \u770b\u96fb\u8166\u7a0b\u5e8f(\u5206\u9801\u5f0f)\n",Object(c.b)("inlineCode",{parentName:"p"},"ps aux | grep ssh")," \u67e5\u770bssh\u662f\u5426\u6b63\u5728\u8dd1\n",Object(c.b)("inlineCode",{parentName:"p"},"get <filename>"),"\u4e0b\u8f09\u6a94\u6848\n",Object(c.b)("inlineCode",{parentName:"p"},"put <filename>"),"\u4e0a\u50b3\u6a94\u6848\n",Object(c.b)("inlineCode",{parentName:"p"},"get -r <filename>"),"\u4e0b\u8f09\u8cc7\u6599\u593e\n",Object(c.b)("inlineCode",{parentName:"p"},"put -r <filename>"),"\u4e0a\u50b3\u8cc7\u6599\u593e\n",Object(c.b)("inlineCode",{parentName:"p"},"l<command>"),"\u5728\u672c\u6a5f\u4e0b\u6307\u4ee4 ex: ",Object(c.b)("inlineCode",{parentName:"p"},"lpwd"),", ",Object(c.b)("inlineCode",{parentName:"p"},"lcd"),", ",Object(c.b)("inlineCode",{parentName:"p"},"lls"),"\n",Object(c.b)("inlineCode",{parentName:"p"},"exit")," \u9000\u51fa\n",Object(c.b)("inlineCode",{parentName:"p"},"mkdir -p a/b/c/d/e/"),"\u4e00\u6b21\u5275\u591a\u5c64\u8cc7\u6599\u593e\n",Object(c.b)("inlineCode",{parentName:"p"},"tree")," \u5c0f\u670b\u53cb\u4e0b\u6a13\u68af"),Object(c.b)("p",null,":::info\n",Object(c.b)("em",{parentName:"p"},"\u6e2c\u8a66\u74b0\u5883")),Object(c.b)("p",null,"ip: 128.199.104.77\nusername: lsa\npasswd: ~!@#$%^&*()_+\n:::"),Object(c.b)("p",null,":::success\n",Object(c.b)("strong",{parentName:"p"},"\u7df4\u7fd2")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sftp -v xxx@xxxxx")),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"(1)"),"\ncd /tmp/\nls\nlcd /home/xxxx/\nlmkdir 123456789\nlcd 123456789\npwd\nlpwd"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"(2)"),"\nget abc.def\nls\nlls"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"(3)"),"\ncd 123456789\npwd\nlpwd"),Object(c.b)("p",null,Object(c.b)("strong",{parentName:"p"},"(4)"),"\nput abc.def\npwd\nls\nlpwd\nlls\n:::"),Object(c.b)("h3",{id:"rsync"},"rsync"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"rsync rsync://ftp.ubuntu-tw.net")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"rsync rsync://ftp.ubuntu-tw.net/ubuntu/dists/xenial/")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"rsync rsync://ftp.ubuntu-tw.net/ubuntu/dist/xenial/Release.gpg ./")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"rsync -av <source> <destination>")," \u540c\u6b65\u96d9\u65b9\u8cc7\u6599"),Object(c.b)("p",null,"rsync\u540c\u6b65\u9060\u7aef\u4e3b\u6a5f\u6a94\u6848(ssh)"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{}),"rsync -av --delete -e ssh username@xxx.xxx.xxx:/var/www /home/backup/www\n")),Object(c.b)("h3",{id:"crontab"},"crontab"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"crontab")," \u5b9a\u7fa9\u5b9a\u6642\u57f7\u884c\u67d0\u4e8b\u4ef6"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo vim /etc/crontab"),"\u3000crontab\u8a2d\u5b9a\u6a94"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"crontab -l")," \u5217\u51facrontab"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"crontab -e")," \u65b0\u589e\u6216\u522a\u9664\u4fee\u6539, \u6703\u544a\u77e5\u662f\u5426\u6709\u505a\u66f4\u52d5"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"crontab -r")," \u522a\u9664crontab"),Object(c.b)("p",null,":::warning\n\u8acb\u611b\u7528",Object(c.b)("inlineCode",{parentName:"p"},"crontab"),"\u6307\u4ee4\u4f86\u8a2d\u5b9a\u500b\u4eba\u81ea\u52d5\u5316\u8173\u672c\n\u975e\u5fc5\u8981\u4e0d\u7528\u53bb\u52d5\u5230",Object(c.b)("inlineCode",{parentName:"p"},"/etc/crontab"),"\n:::"),Object(c.b)("p",null,"\u6e2c\u8a66\u6307\u4ee4 :\n",Object(c.b)("inlineCode",{parentName:"p"},"*/5 * * * * rsync -av rsync://ftp.ubuntu-tw.net/ubuntu/dists/xenial/  /home/bluet/tmp/rsync/xenial/")),Object(c.b)("p",null,Object(c.b)("a",Object(r.a)({parentName:"p"},{href:"https://crontab.guru/every-5-minutes"}),"crontab")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"/"),': \u4ee3\u8868"\u6bcf"\n',Object(c.b)("inlineCode",{parentName:"p"},"*"),": \u4ee3\u8868\u7bc4\u570d\n",Object(c.b)("inlineCode",{parentName:"p"},"-"),": \u5f9e\u54ea\u908a\u5230\u54ea\u908a"),Object(c.b)("h3",{id:"major-webserver"},"major webserver"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"nginx\u3000\u4e00\u6b21\u53ef\u4ee5\u8655\u7406\u591a\u4f7f\u7528\u8005(\u9023\u7dda),\u9069\u5408\u505aproxy server"),Object(c.b)("li",{parentName:"ul"},"apache \u529f\u80fd\u5f88\u591a,\u901f\u5ea6\u8f03\u6162"),Object(c.b)("li",{parentName:"ul"},"lighttpd \u975c\u614b\u6a94\u6848\u8655\u7406\u80fd\u529b\u4f73")),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo /etc/init.d/<service name> stop"),"\u505c\u6b62\u67d0\u500b\u670d\u52d9"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo service <service name> stop"),"\u505c\u6b62\u67d0\u500b\u670d\u52d9"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo service <service name> status"),"\u67e5\u770b\u670d\u52d9status"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo netstat -ntupl"),"\u53ea\u5217\u51fa\u6b63\u5728\u76e3\u807d\u4e2d\u7684\u88ab\u52d5\u7b49\u5225\u4eba\u4f86\u9023\u7684port"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"0.0.0.0:*"),"\u5168\u90e8\u5c01\u5305\u90fd\u63a5\u6536 "),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"0.0.0.0")," \u672c\u6a5f\u7684\u6240\u6709\u7db2\u5361"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo iftop")," \u76e3\u807d\u7db2\u5361\u5de5\u5177"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"w3m http://<url>")," \u7d14\u6587\u5b57\u700f\u89bd\u7db2\u9801"))}o.isMDXComponent=!0},233:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return O}));var r=t(0),a=t.n(r);function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){c(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)t=c[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=a.a.createContext({}),o=function(e){var n=a.a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):b({},n,{},e)),t},s=function(e){var n=o(e.components);return a.a.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=Object(r.forwardRef)((function(e,n){var t=e.components,r=e.mdxType,c=e.originalType,p=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),s=o(t),d=r,O=s["".concat(p,".").concat(d)]||s[d]||u[d]||c;return t?a.a.createElement(O,b({ref:n},l,{components:t})):a.a.createElement(O,b({ref:n},l))}));function O(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var c=t.length,p=new Array(c);p[0]=d;var b={};for(var i in n)hasOwnProperty.call(n,i)&&(b[i]=n[i]);b.originalType=e,b.mdxType="string"==typeof e?e:r,p[1]=b;for(var l=2;l<c;l++)p[l]=t[l];return a.a.createElement.apply(null,p)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);