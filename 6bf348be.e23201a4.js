(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{165:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return p})),n.d(t,"rightToc",(function(){return o})),n.d(t,"default",(function(){return b}));var r=n(1),a=n(9),c=(n(0),n(233)),l={},p={id:"1071/Week8",title:"Week8",description:"# Week8, 11/8 LSA",source:"@site/docs/1071/Week8.md",permalink:"/docs/1071/Week8",editUrl:"https://github.com/NCNU-OpenSource/NCNU-OpenSource.github.io/edit/src/docs/1071/Week8.md",sidebar:"someSidebar",previous:{title:"Week7",permalink:"/docs/1071/Week7"},next:{title:"Week9",permalink:"/docs/1071/Week9"}},o=[{value:"nginx proxy load balance",id:"nginx-proxy-load-balance",children:[]},{value:"ufw(\u9632\u706b\u7246)",id:"ufw\u9632\u706b\u7246",children:[]},{value:"apache",id:"apache",children:[]},{value:"OSI Model",id:"osi-model",children:[]}],i={rightToc:o};function b(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},i,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"week8-118-lsa"},"Week8, 11/8 LSA"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo nginx -t"),"\u67e5\u770bnginx\u8a2d\u5b9a\u6a94\u662f\u5426\u6210\u529f\u5957\u7528,\u8a9e\u6cd5\u662f\u5426\u6709\u932f"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo lighttpd -f /etc/lighttpd /etc/lighttpd/lighttpd.conf"),"\u67e5\u770blighttpd\u8a2d\u5b9a\u6a94\u662f\u5426\u6210\u529f\u5957\u7528"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo netstat -ntupl"),"\u5370\u51fa\u96fb\u8166\u6bcf\u500bport\u7684\u9023\u7dda\u72c0\u6cc1"),Object(c.b)("p",null,":::warning\n1.\u9810\u8a2d lighttpd \u8ddf nginx \u90fd\u662f\u8dd1\u572880port\uff0c\u6240\u4ee5\u5169\u500b\u624d\u4e0d\u80fd\u4e00\u8d77\u8dd1\n2.default server \u53ea\u80fd\u6709\u4e00\u500b\n:::"),Object(c.b)("h3",{id:"nginx-proxy-load-balance"},"nginx proxy load balance"),Object(c.b)("p",null,"\u9078\u64c7\u4e00\u500b\u8a2d\u5b9a\u6a94\u505aproxy \uff08\u4ee3\u7406\u4f3a\u670d\u5668\uff09"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-nginx"}),"# \u8acb\u6dfb\u52a0\u5728 server{} \u5916\nupstream backend {\n    server 127.0.0.1:8081;\n    server 127.0.0.1:8082;\n}\n")),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-nignx"}),"# try_files $uri $uri/ =404;\nlocation / {\n    proxy_pass http://backend;\n}\n")),Object(c.b)("p",null,"\u4f46\u662f localhost:8081 \u548c localhost:8082 \u9084\u662f\u80fd\u901a\u9053\u5f8c\u9762\u7684\u4e3b\u6a5f"),Object(c.b)("h3",{id:"ufw\u9632\u706b\u7246"},"ufw(\u9632\u706b\u7246)"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo apt install ufw")," \u5b89\u88ddufw"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo ufw enable")," \u555f\u52d5ufw"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo ufw status"),"\u67e5\u770bufw\u72c0\u614b"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo ufw status verbose"),"\u67e5\u770bufw\u8a73\u7d30\u72c0\u614b"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo ufw -h"),"ufw help"),Object(c.b)("p",null,"\u88fd\u4f5c\u898f\u5247:\n",Object(c.b)("inlineCode",{parentName:"p"},"sudo ufw allow 80"),"\u5141\u8a3180port\u5c0d\u5916\u958b\u653e\n",Object(c.b)("inlineCode",{parentName:"p"},"sudo ufw deny 8081")," \u7981\u6b62 8081 port \u5c0d\u5916\u958b\u653e"),Object(c.b)("h3",{id:"apache"},"apache"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo apt install apache2"),"\n",Object(c.b)("inlineCode",{parentName:"p"},"vim ports.config")," \u7528\u65bc\u8a2d\u5b9a port (\u9810\u8a2d 80)"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"000-default.conf")," http config"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"default-ssl.conf")," https config"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo a2ensite 000-default.conf")," \u555f\u7528 apache2 \u8a2d\u5b9a\u6a94(\u8ddf reload \u76f8\u540c\u529f\u80fd, apache2 \u5c08\u5c6c)"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo a2dissite 000-default.conf")," \u95dc\u9589apache2\u8a2d\u5b9a\u6a94"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo a2enmod rewrite"),"apache2 \u8d77\u7528 rewrite \u6a21\u7d44"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo a2enmod userdir"),"apache2 \u8d77\u7528 userdir \u6a21\u7d44\uff08\u8b93apache\u8b80\u53d6~/public_html/ \u5e95\u4e0b\u7684\u6771\u897f\uff09(\u8b93\u4e00\u822c\u7528\u6236\u4e5f\u53ef\u5efa\u7db2\u9801)"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},"sudo service apache2 restart"),"\u91cd\u555fapache2"),Object(c.b)("p",null,Object(c.b)("inlineCode",{parentName:"p"},".htaccess")," apache\u4f7f\u7528\u8005\u6b0a\u9650\u63a7\u5236"),Object(c.b)("p",null,":::info\nmkdir ~/public_html "),Object(c.b)("p",null,"\u5275\u4e00\u500b index.html \u5728 ~/public_html/ \u5e95\u4e0b"),Object(c.b)("p",null,"\u7136\u5f8c\u62dc\u8a2a ",Object(c.b)("a",Object(r.a)({parentName:"p"},{href:"http://127.0.0.1/~username/"}),"http://127.0.0.1/~username/"),"\n:::"),Object(c.b)("h3",{id:"osi-model"},"OSI Model"),Object(c.b)("p",null,Object(c.b)("img",Object(r.a)({parentName:"p"},{src:"https://i.imgur.com/Shg4ttv.png",alt:null}))))}b.isMDXComponent=!0},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return O}));var r=n(0),a=n.n(r);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var i=a.a.createContext({}),b=function(e){var t=a.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):p({},t,{},e)),n},u=function(e){var t=b(e.components);return a.a.createElement(i.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},s=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,c=e.originalType,l=e.parentName,i=o(e,["components","mdxType","originalType","parentName"]),u=b(n),s=r,O=u["".concat(l,".").concat(s)]||u[s]||d[s]||c;return n?a.a.createElement(O,p({ref:t},i,{components:n})):a.a.createElement(O,p({ref:t},i))}));function O(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var c=n.length,l=new Array(c);l[0]=s;var p={};for(var o in t)hasOwnProperty.call(t,o)&&(p[o]=t[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,l[1]=p;for(var i=2;i<c;i++)l[i]=n[i];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}s.displayName="MDXCreateElement"}}]);