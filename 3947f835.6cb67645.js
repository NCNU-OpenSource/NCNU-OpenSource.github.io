(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{150:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return p})),n.d(t,"rightToc",(function(){return u})),n.d(t,"default",(function(){return s}));var l=n(1),c=n(9),b=(n(0),n(233)),r={},p={id:"1041/Week7",title:"Week7",description:"# 1041 Week7\xa0",source:"@site/docs/1041/Week7.md",permalink:"/docs/1041/Week7",editUrl:"https://github.com/NCNU-OpenSource/NCNU-OpenSource.github.io/edit/src/docs/1041/Week7.md",sidebar:"someSidebar",previous:{title:"Week5",permalink:"/docs/1041/Week5"},next:{title:"Week-8-Samba",permalink:"/docs/1041/Week-8-Samba"}},u=[{value:"\u4fee\u6539\u6b0a\u9650",id:"\u4fee\u6539\u6b0a\u9650",children:[]},{value:"SSH-KEY",id:"ssh-key",children:[]},{value:"snmp",id:"snmp",children:[]},{value:"cacti",id:"cacti",children:[]}],a={rightToc:u};function s(e){var t=e.components,n=Object(c.a)(e,["components"]);return Object(b.b)("wrapper",Object(l.a)({},a,n,{components:t,mdxType:"MDXLayout"}),Object(b.b)("h1",{id:"1041-week7"},"1041 Week7\xa0"),Object(b.b)("p",null,"VM/VPS\xa0 VM:virtual machine\xa0 VPS:virtual private server:"),Object(b.b)("p",null,"icinga"),Object(b.b)("p",null,"cacti\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 \u76e3\u63a7server\u7684\u5de5\u5177"),Object(b.b)("p",null,"SNMP\xa0\xa0\xa0\xa0 \u6536\u96c6\u4f3a\u670d\u5668\u8cc7\u8a0a"),Object(b.b)("p",null,"sudoer\xa0\xa0 \u8a2d\u5b9asudo\u7684\u5de5\u5177"),Object(b.b)("p",null,"ssh key\xa0\xa0 \u751f\u6210\u516c\u958b\u91d1\u9470"),Object(b.b)("p",null,"lsa.BlueT.org"),Object(b.b)("p",null,"droplets"),Object(b.b)("p",null,"homework:\u81ea\u884c\u7522\u751f\u4e00\u628assh key, lsa.BlueT.org"),Object(b.b)("p",null,"icinga\u3000\u8ddf\u3000nagios\xa0\xa0\xa0\xa0"),Object(b.b)("p",null,"\u53ea\u7d00\u9304 on off\xa0 \u4e26\u63d0\u4f9b\u8b66\u5831"),Object(b.b)("p",null,"cacti"),Object(b.b)("p",null,"\u7d00\u9304\u6a5f\u5668\u6bcf\u500b\u6642\u9593\u9ede\u7684\u72c0\u614b"),Object(b.b)("p",null,"uptime\xa0\xa0"),Object(b.b)("p",null,"netstat"),Object(b.b)("p",null,"snmpwalk"),Object(b.b)("p",null,"MIB(Management information base)"),Object(b.b)("p",null,"\u6307\u4ee4\uff1assh-copy-id\xa0\xa0"),Object(b.b)("p",null,"adduser blueT\uff08\u81ea\u5df1\u7684\u540d\u7a31\uff09"),Object(b.b)("p",null,"cat /etc/passwd"),Object(b.b)("p",null,"visudo"),Object(b.b)("p",null,"etc/groups \uff08\u5b58\u653e\u6240\u6709\u7684\u7fa4\u7d44\uff09"),Object(b.b)("h2",{id:"\u4fee\u6539\u6b0a\u9650"},"\u4fee\u6539\u6b0a\u9650"),Object(b.b)("p",null,"vigr (find ur group and edit) -s"),Object(b.b)("h2",{id:"ssh-key"},"SSH-KEY"),Object(b.b)("p",null,"ssh bluet@188.166.239.9"),Object(b.b)("p",null,"ssh-copy-id bluet@188.166.239.9"),Object(b.b)("p",null,"sudo netstat -ntupl"),Object(b.b)("p",null,"inet6 addr \u53ea\u6709\u4e00\u689d, fe80\u958b\u982d>\u6c92\u6709IPv6 ; 2001 -> useful IPv6sudo\xa0"),Object(b.b)("p",null,"agentAddress udp:161ssh"),Object(b.b)("p",null,"ps aux|grep snmp (check ur snmp)\xa0 |\u4e0d\u662f\u5c0f\u5bebL"),Object(b.b)("p",null,"127.0.0.1\u90fd\u662f\u9023\u5230\u81ea\u5df1\uff08\u5047\u5982\u4e0d\u662f\u76e3\u63a7\u81ea\u5df1\u7684\u8a71\u628a\u9019\u500b\u8a3b\u89e3\u6389\uff09"),Object(b.b)("h2",{id:"snmp"},"snmp"),Object(b.b)("p",null,"sudo apt-get install cacti snmpd\xa0"),Object(b.b)("p",null,"sudo vim\xa0 /etc/snmp/snmpd.conf"),Object(b.b)("p",null,"\u6539\uff1a\xa0\xa0"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"\u628a\u4e0a\u9762\u7684\u8a3b\u89e3\u6389\u5f8c\u8f38\u5165"),Object(b.b)("li",{parentName:"ul"},"agentAdress udp:161"),Object(b.b)("li",{parentName:"ul"},"rocommunity secret 127.0.0.1"),Object(b.b)("li",{parentName:"ul"},"sysLocation\xa0\xa0 Singapore"),Object(b.b)("li",{parentName:"ul"},"sysContact\xa0\xa0\xa0\xa0 Blue@BlueT.org\xa0")),Object(b.b)("p",null,"\u4e4b\u5f8c\u91cd\u555f\uff1a"),Object(b.b)("p",null,"\xa0\xa0\xa0 sudo service snmpd\xa0 restart"),Object(b.b)("p",null,"\u6aa2\u67e5snmp\u72c0\u614b\uff1a"),Object(b.b)("p",null,"\xa0\xa0\xa0 sudo netstat -ntupl"),Object(b.b)("p",null,"\xa0\xa0\xa0 sudo netstat -ntupl|grep 161\xa0"),Object(b.b)("p",null,"\xa0\xa0\xa0 ====>\u61c9\u8a72\u6703\u770b\u5230\u985e\u4f3c\uff1audp\xa0\xa0\xa0\xa0\xa0\xa0\xa0 0\xa0\xa0\xa0\xa0\xa0 0 0.0.0.0:161\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0 0.0.0.0:*"),Object(b.b)("h2",{id:"cacti"},"cacti"),Object(b.b)("p",null,"\u9023\u5230localhost/cacti"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u9810\u8a2d\u5e33\u5bc6\uff1a")),Object(b.b)("p",null,"admin\xa0"),Object(b.b)("p",null,"admin"),Object(b.b)("p",null,"or"),Object(b.b)("p",null,"cactiadmin"),Object(b.b)("p",null,"cactiadmin"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u65b0\u589e\u4f7f\u7528\u8005\uff1a")),Object(b.b)("p",null,"user management --\x3e add --\x3e ",Object(b.b)("strong",{parentName:"p"},"Graph all allow --\x3e create\xa0")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"Web Setting\uff1a")),Object(b.b)("p",null,"0","."," \u5de6\u908aDevice --\x3e \u522a\u6389localhost\u5f8crecreate"),Object(b.b)("p",null,"1","."," host tamplate ->local linux machine"),Object(b.b)("p",null,"2","."," snmp version\xa0 ->2"),Object(b.b)("p",null,"3","."," SNMP Community-> secret"),Object(b.b)("p",null,"4","."," create (snmp\u6c92\u8a2d\u5b9a\u6703error)"),Object(b.b)("p",null,"5","."," add Associated Data Queries"),Object(b.b)("p",null,"6","."," unix -ping latency ","[add]","\xa0"),Object(b.b)("p",null,"7","."," snmp XXX ",Object(b.b)("a",Object(l.a)({parentName:"p"},{href:"%E6%9C%89%E4%B8%89%E5%80%8B%E9%83%BD%E8%A6%81+"}),"add")),Object(b.b)("p",null,"8","."," save"),Object(b.b)("p",null,"9","."," Create Graphs for this Host(\u53f3\u4e0a\u89d2) ->\u5168\u90e8\u6253\u52fe\u7136\u5f8c\u4e00\u76f4\u4e0b\u4e00\u6b65"),Object(b.b)("p",null,"10","."," \u56de\u53bbindex\u6309graphs(\u5de6\u4e0a\u89d2\uff09\u5f8c\u53f3\u4e0a\u89d2\u5c71\u4e18\u5716\u7247\u6309\u4e00\u6309(showing picture == successful)"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},"\u8981\u7b49\u4e00\u9663\u5b50\u624d\u6703\u6709\u76e3\u6e2c\u7684\u7d50\u679c")),Object(b.b)("p",null,"11","."," Description--\x3e \u6709\u610f\u7fa9\u7684\u540d\u5b50\u6240\u4ee5\u53ef\u4ee5\u96a8\u4fbf\u53d6\xa0\xa0\xa0"),Object(b.b)("p",null,"\xa0\xa0\xa0\xa0 Hostname--\x3e\u5b8c\u6574\u7684\u4e3b\u6a5f\u540d\u7a31\u6216 ip address"),Object(b.b)("ol",{start:12},Object(b.b)("li",{parentName:"ol"})),Object(b.b)("p",null,"\u7b2c\u4e8c\u500b\u4f5c\u696d\u662f\u76e3\u6e2c lsa.bluet.org"),Object(b.b)("p",null,"step1\xa0\xa0 add \u4e00\u500b\u65b0\u7684 device\xa0"),Object(b.b)("p",null,"step2\xa0 \u628a\xa0 Description\u53ef\u4ee5\u96a8\u4fbf\u53d6 , Hostname--\x3e\xa0 lsa.bluet.org"),Object(b.b)("p",null,"step3\xa0 host template -> Generic SNMP-enabled Host"),Object(b.b)("p",null,"step4\xa0 snmp version\xa0 ->2"),Object(b.b)("p",null,"step5\xa0 SNMP Community -> secret"),Object(b.b)("p",null,"\u63a5\u4e0b\u4f86\u7684\u6b65\u9a5f\u5c31\u8ddf\u4e0a\u9762\u7684\u4e00\u6a23"),Object(b.b)("p",null,"\u518d\u7b49\u4e00\u9663\u5b50\u53bb\u5de6\u4e0agraphs\u5c31\u6703\u6709\u4e86"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"ssh\u52a0\u5bc6\u767b\u5165\u4f3a\u670d\u5668\uff1a")),Object(b.b)("p",null,"\xa0\xa0\xa0 //\u7522\u516c\u958b\u91d1\u9470"),Object(b.b)("p",null,"\xa0\xa0 ssh-keygen"),Object(b.b)("p",null,"\xa0\xa0 3\u6b21\u7684enter\u9375"),Object(b.b)("p",null,"\xa0\xa0 //\u9023\u7dda"),Object(b.b)("p",null,"\xa0\xa0 ssh-copy-id s101213006@lsa.bluet.org(\u7bc4\u4f8b)"),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u4fee\u6539user\u5bc6\u78bc\uff1a")),Object(b.b)("p",null,"\xa0\xa0 \u6307\u4ee4\uff1a passwd"))}s.isMDXComponent=!0},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return j}));var l=n(0),c=n.n(l);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,l,c=function(e,t){if(null==e)return{};var n,l,c={},b=Object.keys(e);for(l=0;l<b.length;l++)n=b[l],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(l=0;l<b.length;l++)n=b[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var a=c.a.createContext({}),s=function(e){var t=c.a.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):p({},t,{},e)),n},o=function(e){var t=s(e.components);return c.a.createElement(a.Provider,{value:t},e.children)},i={inlineCode:"code",wrapper:function(e){var t=e.children;return c.a.createElement(c.a.Fragment,{},t)}},O=Object(l.forwardRef)((function(e,t){var n=e.components,l=e.mdxType,b=e.originalType,r=e.parentName,a=u(e,["components","mdxType","originalType","parentName"]),o=s(n),O=l,j=o["".concat(r,".").concat(O)]||o[O]||i[O]||b;return n?c.a.createElement(j,p({ref:t},a,{components:n})):c.a.createElement(j,p({ref:t},a))}));function j(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var b=n.length,r=new Array(b);r[0]=O;var p={};for(var u in t)hasOwnProperty.call(t,u)&&(p[u]=t[u]);p.originalType=e,p.mdxType="string"==typeof e?e:l,r[1]=p;for(var a=2;a<b;a++)r[a]=n[a];return c.a.createElement.apply(null,r)}return c.a.createElement.apply(null,n)}O.displayName="MDXCreateElement"}}]);