(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{219:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return b})),n.d(t,"default",(function(){return p}));var r=n(1),a=n(9),i=(n(0),n(233)),l={},c={id:"1071/Week4",title:"Week4",description:"# Week4, 10/11 LSA",source:"@site/docs/1071/Week4.md",permalink:"/docs/1071/Week4",editUrl:"https://github.com/NCNU-OpenSource/NCNU-OpenSource.github.io/edit/src/docs/1071/Week4.md",sidebar:"someSidebar",previous:{title:"Week3",permalink:"/docs/1071/Week3"},next:{title:"Week5",permalink:"/docs/1071/Week5"}},b=[{value:"FHS",id:"fhs",children:[]},{value:"\u6307\u4ee4",id:"\u6307\u4ee4",children:[]},{value:"Ubuntu \u5c0f\u77e5\u8b58",id:"ubuntu-\u5c0f\u77e5\u8b58",children:[]},{value:"\u6b0a\u9650",id:"\u6b0a\u9650",children:[]},{value:"/var/log",id:"varlog",children:[]},{value:"\u529f\u8ab2",id:"\u529f\u8ab2",children:[]}],o={rightToc:b};function p(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},o,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"week4-1011-lsa"},"Week4, 10/11 LSA"),Object(i.b)("p",null,Object(i.b)("a",Object(r.a)({parentName:"p"},{href:"https://wallacenote.wordpress.com/2015/09/27/%E5%B8%B8%E8%A6%8B%E7%B7%A8%E7%A2%BC%E7%89%B9%E9%BB%9E%E6%95%B4%E7%90%86ascii-big5-utf-8/"}),"\u5e38\u898b\u7de8\u78bc\u7279\u9ede\u6574\u7406")),Object(i.b)("h3",{id:"fhs"},"FHS"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/boot/"),"\u3000\u4e0d\u53ef\u80fd\u5728\u3000sda\u3000(\u786c\u789f)\u5167\uff0c\u6703\u5728\u3000sda1/2/3\u3000(\u5206\u5272\u5340)\u5167"),Object(i.b)("li",{parentName:"ul"},"\u6c92\u6709\u88ab\u5206\u914d\u5230\u7684\u76ee\u9304, \u90fd\u6703\u88ab\u5206\u914d\u5230\u6839\u76ee\u9304\u5e95\u4e0b"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/dev/loop")," ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://en.wikipedia.org/wiki/Loop_device"}),"wiki")," / ",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://zh.wikipedia.org/wiki/Loop%E8%AE%BE%E5%A4%87"}),"\u4e2d\u6587wiki support")," (\u6709\u4eba\u53ef\u4ee5\u88dc\u5145\u55ce\uff1f \u6211\u807c\u4e0d\u592a\u6e05\u695a ",Object(i.b)("strong",{parentName:"li"},"\u6709\u8acb\u611b\u5fc3\u52a9\u6559"),")"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/home/")," \u4f7f\u7528\u8005\u5bb6\u76ee\u9304"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/srv/")," server \u6216 service \u81ea\u5df1\u7684\u670d\u52d9 \u53ef\u653e\u81ea\u5df1\u5beb\u7684\u8edf\u9ad4"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/var/www/")," \u901a\u5e38\u7db2\u9801\u6703\u653e\u5728\u9019\u88cf \u4f46\u662fvar\u662f\u6bd4\u8f03\u5e38\u8b8a\u52d5\u7684\u8cc7\u6599\u628a\u7db2\u9801\u5b58\u653e\u5728\u9019\u88cf\u6709\u9ede\u5947\u602a\u3002 (\u76f8\u5c0d\u65bc\u7cfb\u7d71\u4f86\u8aaa\uff0c\u7db2\u9801\u6bd4\u8f03\u5e38\u8b8a\u52d5\u3002\u5927\u591aweb server\u9810\u8a2d\u7db2\u9801\u8def\u5f91\u4e5f\u5728\u9019)"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/var/run")," \u653e\u90a3\u500b\u6709\u6c92\u6709\u5728\u57f7\u884c\u7684\u6a94\u6848"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/var/log")," \u65e5\u8a8c\u6587\u4ef6\uff08\u5404\u5f0f\u5404\u6a23\u91cd\u8981\u7684\u7d00\u9304\u6a94\uff09"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/var/log/auth.log")," \u8a8d\u8b49\u7684\u7d00\u9304\u6a94"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/var/cache")," \u653e\u61c9\u7528\u7a0b\u5f0f\u7684\u7de9\u5b58\u6587\u4ef6"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},".pid")," process \u7684 id"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},".sock / .socket")," \u7684\u6a94\u6848 \u7576\u6210 FIFO \u6a94"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/opt")," \u901a\u5e38\u70ba\u81ea\u5df1\u7684\u61c9\u7528\u7a0b\u5f0f \u7167\u7406\u4e0d\u6703\u7528\u5230\u9019\u88cf"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/lib")," or ",Object(i.b)("inlineCode",{parentName:"li"},"/usr/lib/")," \u653e\u5404\u5f0f\u5404\u6a23 library \u7684\u5730\u65b9"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/mnt")," \u904e\u53bb\u7fd2\u6163\u81e8\u6642\u6302\u8f09\u6a94\u6848\u7684\u76ee\u9304"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/media/<username>")," \u65b0\u7248 Ubuntu \u786c\u9ad4\u63d2\u5165\u81ea\u52d5\u639b\u8f09\u76ee\u9304\uff0c\u4f8b\u5982 USB"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/proc")," process\u7684\u865b\u64ec\u6a94\u6848"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/tmp")," \u82e5\u88ab\u4fb5\u5165\u53ef\u5f9e\u9019\u767c\u73fe\u75d5\u8de1",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/tmp")," \u53e6\u5916\u5206\u5272\u4e26\u8a2d\u6210 noexec \u53ef\u589e\u52a0\u5b89\u5168\u6027,\u4f46\u53ef\u80fd\u9020\u6210\u90e8\u4efd\u61c9\u7528\u5b89\u88dd\u5931\u6557\uff08\u6703\u5c07\u6a94\u6848\u66ab\u653e /tmp \u7684\u61c9\u7528\uff09"))),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"/var/log/auth.log")," \u5617\u8a66\u9060\u7aef\u767b\u5165\u4e3b\u6a5f\u7684\u7d00\u9304")),Object(i.b)("h3",{id:"\u6307\u4ee4"},"\u6307\u4ee4"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),"\n> `mount <iso file> <directory>` \u639b\u8f09\u5370\u8c61\u6a94\n> `umount <directory>` \u5378\u8f09\u5370\u8c61\u6a94\n> `ps` \u770b\u76ee\u524dconsole\u57f7\u884c\u4e86\u591a\u5c11\u6771\u897f\n> `ps aux` \u67e5\u770b\u6240\u6709\u884c\u7a0b\n>> - a : \u986f\u793a\u6240\u6709process\n>> - u : \u4ee5\u7528\u6236\u6a21\u5f0f\u986f\u793a\n>> - x : \u4e0d\u4ee5terminal\u5340\u5206\n\n> `wc` word count\n> `less` \u628a\u8f38\u51fa\u5206\u9801\u986f\u793a \u53ef\u4ee5\u7528\u9375\u76e4\u4e0a\u4e0b\u9375\u770b\u8f38\u51fa\u7684\u8cc7\u6599\n> `|` pipe,\u5c07\u524d\u9762 stdout \u4e1f\u7d66\u5f8c\u9762\u4f5c stdin\n>> eg. `cat <filename> | less`\n>> `last`  \u4e00\u500b\u6708\u5185\uff0c\u6c92\u95dc\u6a5f\u524d\u7684\u767b\u5165\u8a18\u9304\n\n> ps aux|grep \\`cat lightdm.pid\\`\n> `/proc/<pid>$ cat stat` <pid>\u7684\u72c0\u614b\n> `whereis <filename/directory>` \u5217\u51fa\u67d0\u500b filename\u6216directory\u7684\u4f4d\u7f6e\n> `chown <\u8981\u63db\u6210\u7684\u4f7f\u7528\u8005>\uff1a<\u8981\u63db\u6210\u7684\u7fa4\u7d44>` change owner\n> `netstat -an` \u770b\u76ee\u524d\u9023\u7f10\n>  `last` \u986f\u793a\u51fa\u767b\u9304\u904e\u7684\u4f7f\u7528\u8005\n>   `w` \u73fe\u5728\u767b\u5165\u7684\u4f7f\u7528\u8005\n\n")),Object(i.b)("h3",{id:"ubuntu-\u5c0f\u77e5\u8b58"},"Ubuntu \u5c0f\u77e5\u8b58"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u5728terminal \u9ede\u5169\u4e0b\u6703\u53cd\u767d \u5c31\u4ee3\u8868\u8907\u88fd\u6210\u529f"),Object(i.b)("li",{parentName:"ul"},"\u6309\u4e0b\u6ed1\u9f20\u4e2d\u9593\u9375\u5c31\u53ef\u4ee5\u76f4\u63a5\u8cbc\u4e0a"),Object(i.b)("li",{parentName:"ul"},"\u6a94\u6848\u88ab\u8b80\u53d6\u6642\u4e5f\u6703\u66f4\u65b0Access\u6642\u9593,Download server\u901a\u5e38\u6703\u5c07relatime\u5c6c\u6027\u62ff\u6389,\u4ee5\u6e1b\u8f15\u786c\u789f\u8ca0\u64d4"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://usn.ubuntu.com/3304-1/"}),"sudo vuln"))),Object(i.b)("h3",{id:"\u6b0a\u9650"},"\u6b0a\u9650"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"set uid"),"\u529f\u80fd (",Object(i.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.phpini.com/linux/linux-set-setuid-setgid-permission"}),"\u53c3\u8003"),")\n",Object(i.b)("img",Object(r.a)({parentName:"li"},{src:"https://i.imgur.com/3blWr17.png",alt:null})),"\n\u57f7\u884c\u8a72\u7a0b\u5f0f\u4e4b\u5f8c\u7522\u751f\u7684process\u6b0a\u9650\u70ba\u64c1\u6709\u8a72\u7a0b\u5f0f\u7684\u4eba\u4e4b\u6b0a\u9650\n(\u4f8b\u5982\u64c1\u6709\u8005\u70baB\uff0c\u57f7\u884c\u8005\u70baA\uff0c\u8a72process\u6b0a\u9650\u70baB\u6240\u6709)")),Object(i.b)("h3",{id:"varlog"},"/var/log"),Object(i.b)("p",null,"ssh\u9060\u7aef\u767b\u5165log file\u5728",Object(i.b)("inlineCode",{parentName:"p"},"/var/log/auth.log"),"\u4e2d\n\u5584\u7528\u5de5\u5177\u53ef\u4ee5\u7c21\u55ae\u5206\u6790\u662f\u5426\u6709\u4eba\u5617\u8a66\u767b\u5165\u4f60\u7684\u4e3b\u6a5f"),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{}),'sudo cat /var/log/auth.log | grep "Failed"\n')),Object(i.b)("h3",{id:"\u529f\u8ab2"},"\u529f\u8ab2"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u81ea\u5df1\u898f\u5283\u4e00\u81fa\u4f3a\u670d\u5668\uff0c\u7d66\u7cfb\u4e0a\u6240\u6709\u540c\u5b78\u4f7f\u7528"),Object(i.b)("li",{parentName:"ul"},"128G SSD"),Object(i.b)("li",{parentName:"ul"},"400G HDD"),Object(i.b)("li",{parentName:"ul"},"\u529f\u80fd\u5982\u4e0b\n+ \u6bcf\u500b\u5b78\u751f\u6709\u81ea\u5df1\u7684\u8cec\u865f\uff0c\u53ef\u4ee5\u4e0a\u50b3\u81ea\u5df1\u7684\u6a94\u6848\u3001\u7576\u6210\u81ea\u5df1\u7684\u7a7a\u9593\n+ \u63d0\u4f9b\u7db2\u9801\u4f3a\u670d\u5668\u7684\u6a94\u6848\u4e0b\u8f09\n+ \u90f5\u4ef6\u4f3a\u670d\u5668")))}p.isMDXComponent=!0},233:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return s}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var o=a.a.createContext({}),p=function(e){var t=a.a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):c({},t,{},e)),n},u=function(e){var t=p(e.components);return a.a.createElement(o.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},O=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,o=b(e,["components","mdxType","originalType","parentName"]),u=p(n),O=r,s=u["".concat(l,".").concat(O)]||u[O]||m[O]||i;return n?a.a.createElement(s,c({ref:t},o,{components:n})):a.a.createElement(s,c({ref:t},o))}));function s(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=O;var c={};for(var b in t)hasOwnProperty.call(t,b)&&(c[b]=t[b]);c.originalType=e,c.mdxType="string"==typeof e?e:r,l[1]=c;for(var o=2;o<i;o++)l[o]=n[o];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,n)}O.displayName="MDXCreateElement"}}]);